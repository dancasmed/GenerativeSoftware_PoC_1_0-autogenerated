
{"id":"715ed8af-c52a-4aa8-8679-982b67ee813f","object":"chat.completion","created":1743798100,"model":"deepseek-chat","choices":[{"index":0,"message":{"role":"assistant","content":"```json\n{\n  \"source_code\": \"using System;\\nusing System.Collections.Generic;\\nusing System.IO;\\nusing System.Text.Json;\\n\\npublic class MealPlannerModule : IGeneratedModule\\n{\\n    public string Name { get; set; } = \\\"Weekly Meal Planner\\\";\\n\\n    private List<Recipe> _recipes;\\n    private List<MealPlan> _mealPlans;\\n    private string _recipesFilePath;\\n    private string _mealPlansFilePath;\\n\\n    public MealPlannerModule()\\n    {\\n        _recipes = new List<Recipe>();\\n        _mealPlans = new List<MealPlan>();\\n    }\\n\\n    public bool Main(string dataFolder)\\n    {\\n        Console.WriteLine(\\\"Weekly Meal Planner module is running...\\\");\\n\\n        _recipesFilePath = Path.Combine(dataFolder, \\\"recipes.json\\\");\\n        _mealPlansFilePath = Path.Combine(dataFolder, \\\"mealPlans.json\\\");\\n\\n        LoadRecipes();\\n        LoadMealPlans();\\n\\n        bool continueRunning = true;\\n        while (continueRunning)\\n        {\\n            Console.WriteLine(\\\"\\\\nOptions:\\\");\\n            Console.WriteLine(\\\"1. Add Recipe\\\");\\n            Console.WriteLine(\\\"2. View Recipes\\\");\\n            Console.WriteLine(\\\"3. Generate Meal Plan\\\");\\n            Console.WriteLine(\\\"4. View Meal Plans\\\");\\n            Console.WriteLine(\\\"5. Generate Grocery List\\\");\\n            Console.WriteLine(\\\"6. Exit\\\");\\n\\n            Console.Write(\\\"Enter your choice: \\\");\\n            string choice = Console.ReadLine();\\n\\n            switch (choice)\\n            {\\n                case \\\"1\\\":\\n                    AddRecipe();\\n                    break;\\n                case \\\"2\\\":\\n                    ViewRecipes();\\n                    break;\\n                case \\\"3\\\":\\n                    GenerateMealPlan();\\n                    break;\\n                case \\\"4\\\":\\n                    ViewMealPlans();\\n                    break;\\n                case \\\"5\\\":\\n                    GenerateGroceryList();\\n                    break;\\n                case \\\"6\\\":\\n                    continueRunning = false;\\n                    break;\\n                default:\\n                    Console.WriteLine(\\\"Invalid choice. Please try again.\\\");\\n                    break;\\n            }\\n        }\\n\\n        SaveRecipes();\\n        SaveMealPlans();\\n\\n        Console.WriteLine(\\\"Weekly Meal Planner module finished.\\\");\\n        return true;\\n    }\\n\\n    private void LoadRecipes()\\n    {\\n        if (File.Exists(_recipesFilePath))\\n        {\\n            string json = File.ReadAllText(_recipesFilePath);\\n            _recipes = JsonSerializer.Deserialize<List<Recipe>>(json);\\n        }\\n    }\\n\\n    private void SaveRecipes()\\n    {\\n        string json = JsonSerializer.Serialize(_recipes);\\n        File.WriteAllText(_recipesFilePath, json);\\n    }\\n\\n    private void LoadMealPlans()\\n    {\\n        if (File.Exists(_mealPlansFilePath))\\n        {\\n            string json = File.ReadAllText(_mealPlansFilePath);\\n            _mealPlans = JsonSerializer.Deserialize<List<MealPlan>>(json);\\n        }\\n    }\\n\\n    private void SaveMealPlans()\\n    {\\n        string json = JsonSerializer.Serialize(_mealPlans);\\n        File.WriteAllText(_mealPlansFilePath, json);\\n    }\\n\\n    private void AddRecipe()\\n    {\\n        Console.Write(\\\"Enter recipe name: \\\");\\n        string name = Console.ReadLine();\\n\\n        Console.Write(\\\"Enter number of ingredients: \\\");\\n        int ingredientCount = int.Parse(Console.ReadLine());\\n\\n        List<string> ingredients = new List<string>();\\n        for (int i = 0; i < ingredientCount; i++)\\n        {\\n            Console.Write(\\\"Enter ingredient \\\" + (i + 1) + \\\": \\\");\\n            ingredients.Add(Console.ReadLine());\\n        }\\n\\n        _recipes.Add(new Recipe { Name = name, Ingredients = ingredients });\\n        Console.WriteLine(\\\"Recipe added successfully.\\\");\\n    }\\n\\n    private void ViewRecipes()\\n    {\\n        Console.WriteLine(\\\"\\\\nAvailable Recipes:\\\");\\n        for (int i = 0; i < _recipes.Count; i++)\\n        {\\n            Console.WriteLine((i + 1) + \\\". \\\" + _recipes[i].Name);\\n        }\\n    }\\n\\n    private void GenerateMealPlan()\\n    {\\n        if (_recipes.Count == 0)\\n        {\\n            Console.WriteLine(\\\"No recipes available. Please add recipes first.\\\");\\n            return;\\n        }\\n\\n        Console.Write(\\\"Enter meal plan name: \\\");\\n        string name = Console.ReadLine();\\n\\n        Dictionary<DayOfWeek, string> meals = new Dictionary<DayOfWeek, string>();\\n\\n        foreach (DayOfWeek day in Enum.GetValues(typeof(DayOfWeek)))\\n        {\\n            ViewRecipes();\\n            Console.Write(\\\"Select recipe for \\\" + day + \\\" (enter number): \\\");\\n            int recipeIndex = int.Parse(Console.ReadLine()) - 1;\\n\\n            if (recipeIndex >= 0 && recipeIndex < _recipes.Count)\\n            {\\n                meals.Add(day, _recipes[recipeIndex].Name);\\n            }\\n            else\\n            {\\n                Console.WriteLine(\\\"Invalid recipe selection.\\\");\\n                return;\\n            }\\n        }\\n\\n        _mealPlans.Add(new MealPlan { Name = name, Meals = meals });\\n        Console.WriteLine(\\\"Meal plan generated successfully.\\\");\\n    }\\n\\n    private void ViewMealPlans()\\n    {\\n        Console.WriteLine(\\\"\\\\nAvailable Meal Plans:\\\");\\n        for (int i = 0; i < _mealPlans.Count; i++)\\n        {\\n            Console.WriteLine((i + 1) + \\\". \\\" + _mealPlans[i].Name);\\n            foreach (var meal in _mealPlans[i].Meals)\\n            {\\n                Console.WriteLine(\\\"   \\\" + meal.Key + \\\": \\\" + meal.Value);\\n            }\\n        }\\n    }\\n\\n    private void GenerateGroceryList()\\n    {\\n        if (_mealPlans.Count == 0)\\n        {\\n            Console.WriteLine(\\\"No meal plans available. Please generate a meal plan first.\\\");\\n            return;\\n        }\\n\\n        ViewMealPlans();\\n        Console.Write(\\\"Select meal plan to generate grocery list (enter number): \\\");\\n        int planIndex = int.Parse(Console.ReadLine()) - 1;\\n\\n        if (planIndex < 0 || planIndex >= _mealPlans.Count)\\n        {\\n            Console.WriteLine(\\\"Invalid meal plan selection.\\\");\\n            return;\\n        }\\n\\n        MealPlan selectedPlan = _mealPlans[planIndex];\\n        HashSet<string> groceryItems = new HashSet<string>();\\n\\n        foreach (var meal in selectedPlan.Meals)\\n        {\\n            Recipe recipe = _recipes.Find(r => r.Name == meal.Value);\\n            if (recipe != null)\\n            {\\n                foreach (string ingredient in recipe.Ingredients)\\n                {\\n                    groceryItems.Add(ingredient);\\n                }\\n            }\\n        }\\n\\n        Console.WriteLine(\\\"\\\\nGrocery List:\\\");\\n        foreach (string item in groceryItems)\\n        {\\n            Console.WriteLine(\\\"- \\\" + item);\\n        }\\n    }\\n}\\n\\npublic class Recipe\\n{\\n    public string Name { get; set; }\\n    public List<string> Ingredients { get; set; }\\n}\\n\\npublic class MealPlan\\n{\\n    public string Name { get; set; }\\n    public Dictionary<DayOfWeek, string> Meals { get; set; }\\n}\",\n  \"name\": \"Weekly Meal Planner\",\n  \"description\": \"Helps plan meals for the week and generates grocery lists based on recipes\",\n  \"required_apis\": [],\n  \"required_nugets\": [\n    {\n      \"nuget_name\": \"System.Text.Json\",\n      \"nuget_version\": \"6.0.0\"\n    }\n  ]\n}\n```"},"logprobs":null,"finish_reason":"stop"}],"usage":{"prompt_tokens":529,"completion_tokens":1881,"total_tokens":2410,"prompt_tokens_details":{"cached_tokens":448},"prompt_cache_hit_tokens":448,"prompt_cache_miss_tokens":81},"system_fingerprint":"fp_3d5141a69a_prod0225"}